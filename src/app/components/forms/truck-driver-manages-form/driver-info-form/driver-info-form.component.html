<div class="flex flex-col justify-center gap-5">
  <form
    class="flex justify-center self-center w-full"
    [class.pointer-events-none]="loading"
    [class.opacity-60]="loading"
    [formGroup]="searchForm"
  >
    <app-search-input
      [control]="searchNationalId"
      validationField="nationalId"
      icon="pi pi-search"
      class="min-w-[70%]"
      [placeholder]="appTitle.getPlaceholder('userNationalCodePlaceholder')"
      [searchButtonLabel]="appTitle.buttons.retrieveFromOutdoorSystem"
      [disableSearchButton]="this.searchForm.invalid"
      [onSearchQuery]="loadDriverInfoFromAPI"
      type="number"
    />
  </form>

  <app-section-card>
    <div class="flex flex-col gap-2 md:gap-5">
      <div class="flex flex-col md:flex-row gap-2">
        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.drivers.driverId"
          [readOnly]="true"
          [control]="driverId"
          validationField="driverId"
          [addonWidth]="addonWidth"
        />

        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.users.userNationalCodeTitle"
          [control]="nationalId"
          validationField="nationalId"
          [readOnly]="true"
          [addonWidth]="addonWidth"
          type="number"
        />
      </div>

      <div class="flex flex-col md:flex-row gap-2">
        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.users.userNameAndLastName"
          [control]="fullName"
          validationField="fullName"
          [readOnly]="true"
          [addonWidth]="addonWidth"
        />

        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.users.userFatherName"
          [control]="fatherName"
          validationField="fatherName"
          [readOnly]="true"
          [addonWidth]="addonWidth"
        />
      </div>

      <div class="flex flex-col md:flex-row gap-2">
        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.drivers.driverLicenseNumber"
          [control]="licenseNumber"
          validationField="licenseNumber"
          [readOnly]="true"
          [addonWidth]="addonWidth"
        />

        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.drivers.driverSmartCardNumber"
          [control]="smartCard"
          validationField="smartCard"
          [readOnly]="true"
          [addonWidth]="addonWidth"
        />
      </div>

      <div class="flex flex-col md:flex-row gap-2">
        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.phoneNumbers.inputTitle"
          [placeholder]="appTitle.getPlaceholder('userPhoneNumberPlaceholder')"
          [control]="mobile"
          validationField="mobile"
          [addonWidth]="addonWidth"
          [buttonDisabled]="driverForm.invalid"
          (clickButton)="updateDriverMobileNumber()"
          type="number"
        />

        <app-text-input
          class="w-full"
          [label]="appTitle.inputs.global.address"
          [control]="address"
          validationField="address"
          [addonWidth]="addonWidth"
          [readOnly]="true"
        />
      </div>
    </div>
  </app-section-card>

  <!-- Action Buttons -->
  <div
    class="flex self-center flex-col flex-wrap md:flex-row w-full max-w-[51vh] md:max-w-full items-center justify-center gap-2 md:gap-5"
  >
    <app-button
      (click)="updateDriverMobileNumber()"
      [disabled]="this.driverForm.invalid || loading"
      severity="green"
      [label]="appTitle.buttons.saveAndEdit"
      class="w-full md:w-fit"
      styleClass="my-2 text-xs md:text-sm lg:text-base w-full md:w-36 lg:w-40"
    ></app-button>

    <app-button
      (click)="activateDriverSms()"
      [disabled]="this.driverForm.invalid || loading"
      severity="warn"
      [label]="appTitle.buttons.activateSMS"
      class="w-full md:w-fit"
      styleClass="my-2 md:my-0 text-xs md:text-sm lg:text-base w-full md:w-36 lg:w-40"
    ></app-button>

    <app-button
      (click)="sendWebsiteLink()"
      [disabled]="this.driverForm.invalid || loading"
      severity="warn"
      [label]="appTitle.buttons.sendSystemLink"
      class="w-full md:w-fit"
      styleClass="my-2 md:my-0 text-xs md:text-sm lg:text-base w-full md:w-36 lg:w-40"
    ></app-button>

    <app-button
      (click)="resetDriverPassword()"
      [disabled]="this.driverForm.invalid || loading"
      severity="info"
      [label]="appTitle.buttons.generateNewPassword"
      class="w-full md:w-fit"
      styleClass="my-2 md:my-0 text-xs md:text-sm lg:text-base w-full md:w-36 lg:w-40"
    ></app-button>
  </div>
</div>
