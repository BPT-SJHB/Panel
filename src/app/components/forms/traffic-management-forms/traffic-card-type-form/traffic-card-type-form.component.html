<div>
  <!-- ------------------------------------------------------------------
       Toolbar
  ------------------------------------------------------------------- -->
  <div class="flex justify-end mb-4">
    <app-button
      label="جدید"
      (click)="onNew()"
      severity="info"
      styleClass="w-28 md:w-36"
    />
  </div>

  <!-- ------------------------------------------------------------------
       Main Form Grid
  ------------------------------------------------------------------- -->
  <div class="grid gap-4 grid-cols-1 lg:grid-cols-2">
    <!-- Traffic Card Type Selection -->
    <app-select-input
      label="نوع کارت"
      placeholder="انتخاب نوع کارت"
      [options]="trafficCardTypeSelection()"
      [control]="ctrl('TrafficCardTypeId')"
      [addonWidth]="addonWidth"
    />

    <!-- Traffic Card Type ID (hidden/readonly) -->
    <app-text-input
      label="شناسه"
      placeholder="شناسه کارت"
      type="number"
      [control]="ctrl('TrafficCardTypeId')"
      [readOnly]="true"
      [addonWidth]="addonWidth"
      hidden
    />

    <!-- Traffic Card Title -->
    <app-text-input
      label="عنوان"
      placeholder="عنوان کارت"
      [control]="ctrl('TrafficCardTypeTitle')"
      [addonWidth]="addonWidth"
      validationField="title"
    />

    <!-- Active Status -->
    <app-toggle-switch-input
      class="px-5"
      label="وضعیت"
      [control]="ctrl('Active')"
    />
  </div>

  <!-- ------------------------------------------------------------------
       Actions
  ------------------------------------------------------------------- -->
  <div class="flex gap-3 justify-end mt-6">
    <app-button
      label="ویرایش"
      (click)="editTrafficCardType()"
      severity="primary"
      styleClass="w-28 md:w-36"
      [disabled]="cardTypeForm.invalid || loading()"
    />
  </div>
</div>

<!-- --------------------------------------------------------------------
     Register Dialog
--------------------------------------------------------------------- -->
<p-dialog
  [(visible)]="isFormVisible"
  header="ثبت کارت تردد"
  [modal]="true"
  [style]="{ width: '40rem', maxWidth: '100%' }"
  [maskStyle]="{ padding: '1rem' }"
>
  <div class="grid grid-cols-1">
    <!-- Traffic Card Title (new) -->
    <app-text-input
      label="عنوان"
      placeholder="عنوان کارت"
      [control]="editTitleTrafficForm"
      [addonWidth]="addonWidth"
      validationField="title"
    />

    <!-- Dialog Actions -->
    <div class="flex gap-3 justify-end mt-6">
      <app-button
        label="ثبت"
        (click)="registerTrafficCardType()"
        severity="primary"
        styleClass="w-28 md:w-36"
        [disabled]="editTitleTrafficForm.invalid || loading()"
      />
    </div>
  </div>
</p-dialog>
