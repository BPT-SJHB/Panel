<div class="flex flex-col gap-2">
  <!-- Loading Spinner -->
  @if (loading) {
    <div class="h-full w-full z-50 flex items-center justify-center absolute">
      <div class="h-full w-full" style="opacity: 0.2"></div>
      <i class="pi pi-spin pi-spinner primary" style="font-size: 5rem"></i>
    </div>
  }

  <!-- Search Form -->
  <form
    class="col-span-12 mb-5"
    [formGroup]="searchForm"
    [class.pointer-events-none]="loading"
    [class.opacity-60]="loading"
    (ngSubmit)="loadLoadersType()"
  >
    <div class="flex gap-2 items-center">
      <app-text-input
        [control]="searchTitle"
        icon="pi pi-search"
        class="flex-1"
        [placeholder]="'عنوان ' + appTitle.getPlaceholder('truckLoader')"
        addonWidth="5rem"
      />
      <app-button
        (click)="loadLoadersType()"
        [disabled]="searchForm.invalid || loading"
        size="small"
        severity="info"
        styleClass="px-6 py-2"
        [label]="appTitle.buttons.search"
      />
    </div>
  </form>

  <!-- Loader Form -->
  <div [class.pointer-events-none]="loading" [class.opacity-60]="loading">
    <p-table
      [value]="this.loadersFormArray.controls"
      [tableStyle]="tableUi.tableStyle"
      [paginator]="tableUi.paginator"
      [paginatorLocale]="tableUi.paginatorLocale"
      [rows]="tableUi.rows"
      [rowsPerPageOptions]="tableUi.rowsPerPageOptions"
      [stripedRows]="tableUi.stripedRows"
    >
      <ng-template #header>
        <tr>
          <th>فعال و غیر فعال</th>
          <th>کد</th>
          <th>کد سازمانی</th>
          <th>عنوان بارگیر</th>
          <th>بارگیر ثابت و غیر ثابت</th>
        </tr>
      </ng-template>
      <ng-template #body let-control>
        <tr>
          <td>
            <p-checkbox
              [binary]="true"
              (onChange)="onChangeCheckBox(control)"
              class="mb-1"
              [formControl]="control.get('status')"
            ></p-checkbox>
          </td>
          <td>{{ control.get("id")?.value }}</td>
          <td>{{ control.get("code")?.value }}</td>
          <td>{{ control.get("title")?.value }}</td>
          <td>{{ control.get("type")?.value }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
