<!-- Wallet Button -->
<div
  class="flex h-10 rounded-md border bg-button-secondary text-button-secondary hover:bg-button-secondary-hover cursor-pointer transition-all"
  (click)="walletPopover.toggle($event)"
>
  <!-- Wallet Icon -->
  <p-avatar
    icon="pi pi-wallet"
    shape="square"
    size="normal"
    class="w-10 h-full text-info"
  />
  <div class="h-full w-0.5 bg-gray-600 ml-1"></div>
  <!-- Wallet Loading State -->
  <div
    class="flex flex-col justify-center items-center gap-1 pl-2"
    *ngIf="!isUserWalletLoad(); else walletContent"
  >
    <p-skeleton width="7rem" />
    <p-skeleton height="0.5rem" />
  </div>

  <!-- Wallet Info (When Loaded) -->
  <ng-template #walletContent>
    <div
      class="flex items-center gap-2 px-3 py-1 text-sm font-semibold shadow-sm"
    >
      <span>{{ wallet()?.Balance | number : "1.0-0" }} تومان</span>
      <i class="pi pi-angle-down text-xs text-muted-foreground"></i>
    </div>
  </ng-template>
</div>

<!-- Wallet Popover -->
<p-popover #walletPopover>
  <div
    class="w-64 p-4 rounded-xl bg-background flex flex-col gap-4 font-medium"
  >
    <!-- Wallet Summary -->
    <div class="flex items-center justify-between text-sm border-b pb-3">
      <span class="text-muted-foreground">موجودی کیف پول</span>
      <strong class="text-foreground">
        {{ wallet()?.Balance | number : "1.0-0" }} تومان
      </strong>
    </div>

    <!-- Recharge Button -->
    <button
      (click)="openWallet(walletPopover)"
      class="flex items-center w-full gap-3 px-3 py-2 rounded-lg hover:bg-emphasis transition-colors"
    >
      <i class="pi pi-plus-circle text-green-500"></i>
      <span>شارژ کیف پول</span>
    </button>
  </div>
</p-popover>
