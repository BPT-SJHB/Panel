---
sidebar_position: 30
title: WalletProfile
---

# 💳 Wallet Profile Component

کامپوننت `WalletProfileComponent` یک جزء رابط کاربری فشرده است که در نوار بالایی برنامه قرار می‌گیرد و وضعیت مالی کاربر را نمایش می‌دهد. این کامپوننت با نمایش **موجودی (Balance)** کاربر، امکان دسترسی سریع به جزئیات و مدیریت کیف پول را از طریق یک منوی کشویی (Popover) فراهم می‌کند.

---

## ⚙️ معماری و وابستگی‌ها

- **Input**: داده‌های کیف پول (`Wallet`) را مستقیماً از کامپوننت والد (`HeaderComponent`) به‌صورت یک سیگنال دریافت می‌کند.
- **PrimeNG**:
  - **`Skeleton`**: برای نمایش حالت بارگذاری در هنگام واکشی موجودی.
  - **`Popover`**: برای نمایش جزئیات مختصر کیف پول و گزینه ناوبری.
  - **`Avatar`**: برای نمایش آیکون کیف پول.
- **Angular Pipes**: از **`DecimalPipe`** برای فرمت‌دهی صحیح اعداد و نمایش موجودی استفاده می‌کند.
- **NgRx Store**: برای ارسال اکشن `createTab` به منظور باز کردن صفحه مدیریت کیف پول.

---

## 📥 ورودی‌ها و سیگنال‌ها

| نام                    | نوع                              | توضیح                                                                                                                                          |
| :--------------------- | :------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------- |
| `@Input() wallet`      | `WritableSignal<Wallet \| null>` | یک سیگنال که آبجکت کیف پول کاربر (`Wallet`) را دریافت می‌کند. وجود مقدار `null` نشان‌دهنده حالت بارگذاری است.                                  |
| **`isUserWalletLoad`** | `Computed<boolean>`              | یک سیگنال محاسباتی که وضعیت بارگذاری کیف پول را مشخص می‌کند (`true` اگر `wallet()` نال نباشد). این برای کنترل نمایش `Skeleton` استفاده می‌شود. |

---

## 🛠️ توابع و منطق کلیدی

| متد                                | نوع    | توضیح                                                                                                                                                                                                           |
| :--------------------------------- | :----- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`openWallet(popover: Popover)`** | `void` | اکشن **`createTab`** را به NgRx Store ارسال می‌کند تا تب مربوط به مدیریت کیف پول کاربر (`TabComponentKey.UserWalletManagement`) در `TabManagerComponent` باز یا فعال شود. پس از ارسال اکشن، Popover را می‌بندد. |

---

## 🎭 مدیریت حالت بارگذاری و نمایش

این کامپوننت بر اساس وضعیت `isUserWalletLoad()`، یا یک نمایش سریع از موجودی و کد کیف پول ارائه می‌دهد، یا یک کامپوننت **`Skeleton`** را برای نمایش حالت بارگذاری جایگزین می‌کند.

- **نمایش موجودی:** موجودی حساب (`wallet().Balance`) با استفاده از `DecimalPipe` فرمت‌دهی شده تا خوانایی بیشتری داشته باشد.
- **منوی Popover:** با کلیک روی آیکون کیف پول، یک Popover باز می‌شود که اطلاعات دقیق‌تری مانند **کد کیف پول** و **موجودی** را نمایش می‌دهد و دکمه‌ای برای **هدایت به صفحه کامل مدیریت کیف پول** دارد.
