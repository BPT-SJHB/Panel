---
sidebar_position: 18
title: SupportButton
---

# 📞 SupportButton Component

کامپوننت `SupportButtonComponent` یک دکمه شناور (Float Button) است که دسترسی سریع به ابزارهای پشتیبانی سیستم را فراهم می‌کند. این ابزارها شامل نمایش اطلاعات تماس سازمان‌های مرتبط، ثبت تیکت پشتیبانی جدید و امکان هدایت امن کاربر به صفحات مرتبط (از طریق کپچا) هستند.

---

## ⚙️ ویژگی‌های کلیدی

- **دسترسی سریع:** دکمه شناور با یک Popover برای نمایش گزینه‌های مختلف.
- **اطلاعات تماس:** نمایش لیست شماره‌های تماس سازمان‌های صنفی مرتبط با امکان **کپی فوری**.
- **ثبت تیکت:** باز کردن یک دیالوگ مودال برای ثبت تیکت جدید.
- **امنیت هدایت (Captcha Guard):** استفاده از یک دیالوگ Captcha برای تأیید کاربر قبل از هدایت به لینک‌های خارجی یا صفحات مهم.

---

## 🧩 اجزای اصلی رابط کاربری

این کامپوننت سه لایه رابط کاربری را مدیریت می‌کند:

### ۱. Popover (متغیر `visible`)

- **هدف:** نمایش لیست تماس‌های ضروری.
- **محتوا:** لیست سازمان‌ها و شماره‌های تماس آن‌ها (`contactList`) با امکان کپی هر شماره در کلیپ‌بورد.
- **Action:** دکمه‌ای برای باز کردن دیالوگ ثبت تیکت.

### ۲. دیالوگ تیکت (متغیر `dialog`)

- **هدف:** ثبت تیکت جدید.
- **Action:** پس از پر کردن فرم، متد `submitTicket()` فراخوانی می‌شود و پیام موفقیت‌آمیز نمایش داده شده و دیالوگ بسته می‌شود.

### ۳. دیالوگ کپچا (متغیر `activeCaptcha`)

- **هدف:** تأیید کاربر قبل از انجام اکشن‌های حساس یا خروج از سیستم.
- **پیاده‌سازی:** از کامپوننت فرزند `TicketGuardCaptchaFormComponent` برای نمایش فرم کپچا استفاده می‌کند.
- **Action:** اکشن نهایی (مانند `redirectUrl`) به عنوان یک تابع در سیگنال `captchaAction` ذخیره شده و پس از تأیید کپچا اجرا می‌شود.

---

## 🧠 منطق و توابع

| متد                      | هدف                  | نحوه عملکرد                                                                                                                                                                                                                          |
| :----------------------- | :------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `showDialog()`           | باز کردن Popover     | متغیر `visible` را `true` می‌کند.                                                                                                                                                                                                    |
| `showTicketDialog()`     | باز کردن دیالوگ تیکت | `dialog` را `true` و `visible` (Popover) را `false` می‌کند.                                                                                                                                                                          |
| `submitTicket()`         | ارسال فرم تیکت       | یک پیام موفقیت‌آمیز نمایش داده و دیالوگ را می‌بندد. (منطق ارسال واقعی به API در این کامپوننت نیست).                                                                                                                                  |
| `copyToClipboard(text)`  | کپی کردن شماره تماس  | از تابع کمکی `copyTextAndToast` استفاده کرده تا متن را کپی و یک پیام Toast نمایش دهد.                                                                                                                                                |
| **`redirectUrl(route)`** | هدایت امن به آدرس    | 1. تابع نهایی هدایت را در سیگنال `captchaAction` تنظیم می‌کند. 2. `activeCaptcha` را `true` کرده تا دیالوگ Captcha نمایش داده شود. 3. پس از تأیید کپچا، تابع ذخیره‌شده اجرا شده و کاربر به آدرس مورد نظر در یک تب جدید هدایت می‌شود. |

### سیگنال‌ها (`signal`)

- **`activeCaptcha`**: وضعیت فعال بودن دیالوگ کپچا.
- **`captchaAction`**: تابع نهایی که قرار است بعد از تأیید موفقیت‌آمیز کپچا اجرا شود.
- **`contactList`**: لیست ثابت اطلاعات تماس برای نمایش در Popover.
