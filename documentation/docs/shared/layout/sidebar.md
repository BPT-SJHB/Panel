---
sidebar_position: 25
title: Sidebar
---

# ⬅️ Sidebar Component

کامپوننت `SidebarComponent` نوار کناری اصلی ناوبری برنامه را پیاده‌سازی می‌کند. این کامپوننت مسئول نمایش گروه‌بندی‌های صفحات (Page Groups) و ابزارهای جستجو، مدیریت وضعیت باز یا بسته بودن خود از طریق NgRx Store، و مدیریت رفتار واکنش‌گرا (Responsive) در دستگاه‌های موبایل و دسکتاپ است.

---

## ⚙️ معماری و وابستگی‌ها

- **PrimeNG DrawerModule**: برای پیاده‌سازی رابط کاربری نوار کناری کشویی (Draw) استفاده می‌شود که در حالت موبایل به طور خودکار به یک مودال تمام صفحه تبدیل می‌شود.
- **NgRx Store**: این کامپوننت به NgRx Store متصل است تا وضعیت باز یا بسته بودن نوار کناری را رصد کند (`selectIsSidebarOpen`) و اکشن‌های مربوط به بستن آن (`closeSidebar`) را ارسال نماید.
- **`@HostListener`**: برای رصد تغییرات اندازه پنجره و تعیین وضعیت موبایل/دسکتاپ.

## 📥 ورودی‌ها (Inputs) و خروجی‌ها (Outputs)

| نام                       | نوع                   | پیش‌فرض   | توضیح                                                                           |
| :------------------------ | :-------------------- | :-------- | :------------------------------------------------------------------------------ |
| `@Input() width`          | `string`              | `'18rem'` | عرض نوار کناری در حالت دسکتاپ.                                                  |
| `@Input() pageGroupItems` | `PageGroupItem[]`     | `[]`      | لیست گروه‌بندی‌های صفحات که برای ساختار ناوبری در نوار کناری نمایش داده می‌شود. |
| **`isOpen$`**             | `Observable<boolean>` | -         | یک Observable که وضعیت باز یا بسته بودن نوار کناری را از NgRx Store می‌خواند.   |

## 🧠 منطق و مدیریت واکنش‌گرا

| متد                                  | نوع    | توضیح عملکرد                                                                                                                                      |
| :----------------------------------- | :----- | :------------------------------------------------------------------------------------------------------------------------------------------------ |
| **`ngOnInit()`**                     | `void` | در ابتدا وضعیت دستگاه (`isMobile`) را تعیین می‌کند و `isOpen$` را به سلکتور NgRx متصل می‌کند.                                                     |
| **`@HostListener('window:resize')`** | `void` | هنگام تغییر اندازه پنجره مرورگر، متد **`updateIsMobile()`** را فراخوانی می‌کند تا وضعیت `isMobile` به‌روز شود.                                    |
| **`updateIsMobile()`**               | `void` | اندازه فعلی پنجره (`window.innerWidth`) را بررسی می‌کند و اگر کمتر از **992 پیکسل** باشد، `isMobile` را `true` تنظیم می‌کند.                      |
| **`onDrawerClose()`**                | `void` | هنگام بسته شدن نوار کناری (توسط کاربر یا برنامه)، اکشن **`closeSidebar()`** را به NgRx Store ارسال می‌کند تا وضعیت سراسری برنامه به‌روزرسانی شود. |

### رفتار واکنشی (Responsive Behavior)

1.  **دستگاه دسکتاپ (`isMobile` = `false`):** نوار کناری به‌صورت یک نوار جانبی استاندارد با عرض تعریف شده (`width`) نمایش داده می‌شود.
2.  **دستگاه موبایل (`isMobile` = `true`):** کامپوننت `DrawerModule` PrimeNG به طور خودکار به یک **مودال تمام صفحه (full-screen modal)** تبدیل می‌شود و تجربه کاربری بهتری را برای ناوبری لمسی فراهم می‌کند.

---

## 🧩 اجزای داخلی

این کامپوننت از چندین کامپوننت مستقل دیگر برای تکمیل محتوای خود استفاده می‌کند:

- `LogoComponent`: نمایش لوگوی برنامه در بالای نوار کناری.
- `SearchProcessesComponent`: ابزار جستجوی فرآیندها یا صفحات.
- `SidebarPageGroupComponent`: کامپوننت اصلی برای رندر کردن لیست `pageGroupItems` و لینک‌های ناوبری.
- `ThemeManagementComponent`: امکان تغییر تم (حالت تاریک/روشن) در نوار کناری را فراهم می‌کند.
