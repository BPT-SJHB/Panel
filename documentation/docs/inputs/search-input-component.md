---
sidebar_position: 1
title: SearchInput
---

# ๐ SearchInputComponent

ฺฉุงููพูููุช `SearchInputComponent` ฺฉ ููุฏ ูุฑูุฏ ุฌุณุชุฌู ุงุณุช ฺฉู ูุงุจูุชโูุง ูพุดุฑูุชูโุง ุจุฑุง ูุฏุฑุช ุฏุงุฏูโูุง **ูุญู (Static)** ู **ูุงููฺฏุงู (Async)** ูุฑุงูู ูโฺฉูุฏ. ุงู ฺฉุงููพูููุช ุจุง **Reactive Forms** ุณุงุฒฺฏุงุฑ ุจูุฏู ู ุดุงูู ูฺฉุงูุณูโูุง ฺฉุดูฺฏุ ููุชุฑูฺฏ ุฎูุฏฺฉุงุฑ ู ูุงุจูุช ูุนุงูโุณุงุฒ ุฌุณุชุฌู ุจุฑ ุงุณุงุณ ุฒูุงู ุชููู ุชุงูพ (`debounceTime`) ุงุณุช.

-----

## ๐ ูฺฺฏโูุง ฺฉูุฏ

  * **ูพุดุชุจุงู ุฏูฺฏุงูู:** ูุงุจูุช ุฌุณุชุฌู ุฏุงุฏูโูุง ุงุฒ ูุณุช ูุญู (`staticData`) ุง ุงุฒ ุทุฑู ฺฉ ุชุงุจุน ูุงููฺฏุงู (`asyncSearchFn`).
  * **ุฌุณุชุฌู ุฎูุฏฺฉุงุฑ:** ูุนุงูโุณุงุฒ ุฌุณุชุฌู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุญู ุชุงูพุ ุจุง ุงุณุชูุงุฏู ุงุฒ `debounceTime` ุจุฑุง ุจูููโุณุงุฒ ุนููฺฉุฑุฏ.
  * **ฺฉุดูฺฏ (Caching):** ุงุณุชูุงุฏู ุงุฒ ฺฉุด ุจุฑุง ูุชุงุฌ ุฌุณุชุฌู ุณุฑูุฑุ ุจุง ฺฉูุฏ ุจุฑ ุงุณุงุณ ุญุฏุงูู ุทูู ุฌุณุชุฌู (`minSearchLength`) ุจุฑุง ฺฉุงูุด ุฏุฑุฎูุงุณุชโูุง ุชฺฉุฑุงุฑ.
  * **Reactive Forms:** ุงุชุตุงู ุจู `FormControl` ุงูฺฏููุงุฑ.
  * **ุณูุงุฑุดโุณุงุฒ UI:** ูุงุจูุช ุชูุธู ุขฺฉููุ ุจุฑฺุณุจ ุฏฺฉูู ุฌุณุชุฌูุ ู ุนุฑุถ ุจุฎุด Addon.

-----

## โ๏ธ ูุฑูุฏโูุง (Inputs)

| ูุงู | ููุน | ูพุดโูุฑุถ | ุชูุถุญ |
| :--- | :--- | :--- | :--- |
| `control` | `FormControl<string \| null \| undefined>` | `new FormControl('')` | **ุถุฑูุฑ.** ฺฉูุชุฑู ูุฑู ุฑโุงฺฉุชู. |
| `placeholder` | `string` | `''` | ูุชู ุฑุงูููุง ุฏุฑูู ููุฏ. |
| `icon` | `string` | `'pi pi-search'` | ฺฉูุงุณ ุขฺฉูู ููุงุด ุฏุงุฏู ุดุฏู ุฏุฑ ูุฑูุฏ. |
| `searchButtonLabel` | `string` | `'ุฌุณุชุฌู'` | ุจุฑฺุณุจ ุฏฺฉูู ุฌุณุชุฌู. |
| `disableSearchButton` | `boolean` | `false` | ุบุฑูุนุงู ฺฉุฑุฏู ุฏฺฉูู ุฌุณุชุฌู. |
| `language` | `'en' \| 'fa'` | `'fa'` | ูุญุฏูุฏุช ุฒุจุงู ูุฑูุฏ. |
| `type` | `'text' \| 'number'` | `'text'` | ููุน ูุฑูุฏ (ูุชู ุง ุนุฏุฏ). |
| `readOnly` | `boolean` | `false` | ุญุงูุช ููุทโุฎูุงูุฏู. |
| `disabled` | `boolean` | `false` | ุบุฑูุนุงู ฺฉุฑุฏู ฺฉูุชุฑู. |
| `addonWidth` | `string \| null` | `null` | ุนุฑุถ ุจุฎุด ุขฺฉูู ุง Addon. |
| `validationField` | `ValidationField \| null` | `null` | ููุน ููุฏ ุจุฑุง ููุงุด ุฎุทุงูุง ุงุนุชุจุงุฑุณูุฌ. |
| `id` | `string` | `uuidV4()` | ุดูุงุณูโ ฺฉุชุง. |
| **`staticData`** | `T[]` | `[]` | ูุณุช ุฏุงุฏูโูุง ุจุฑุง ููุชุฑูฺฏ ูุญู. |
| **`asyncSearchFn`** | `(query: string) => Promise<T[]>` | `undefined` | ุชุงุจุน ูุงููฺฏุงู ุจุฑุง ูุงฺฉุด ุฏุงุฏูโูุง ุงุฒ ุณุฑูุฑ. |
| **`onSearchQuery`** | `(query: string) => Promise<void>` | `undefined` | ฺฉ ุชุงุจุน ุฌุงฺฏุฒู ฺฉู ุฏุฑ ุตูุฑุช ูุฌูุฏุ ููุทู ุฌุณุชุฌู ุฏุงุฎู ุฑุง ูุบู ูโฺฉูุฏ ู ุชููุง ุฑูุฏุงุฏ ุฌุณุชุฌู ุฑุง ุงุฌุฑุง ูโููุงุฏ. |
| **`itemMatchesQuery`** | `(item: T, query: string) => boolean` | `undefined` | **ุถุฑูุฑ ุจุฑุง ุฌุณุชุฌู ููฺฉุงู/ฺฉุด.** ูุชุฏ ููุชุฑูฺฏ ุจุฑุง ููุงุณู ุขุชู ุจุง ฺฉูุฆุฑ. |
| **`autoTriggerSearch`** | `boolean` | `false` | ุฌุณุชุฌู ุฎูุฏฺฉุงุฑ ุฏุฑ ุญู ุชุงูพ (ุจุง ุฒูุงู ุชุฃุฎุฑ). |
| **`debounceTimeMs`** | `number` | `300` | ุฒูุงู ุชุฃุฎุฑ (ุจู ููโุซุงูู) ูพุด ุงุฒ ุดุฑูุน ุฌุณุชุฌู ุฏุฑ ุญุงูุช `autoTriggerSearch`. |
| **`minSearchLength`** | `number` | `3` | ุญุฏุงูู ุทูู ฺฉูุฆุฑ ุจุฑุง ูุนุงูโุณุงุฒ ุฌุณุชุฌู. |
| **`enableCaching`** | `boolean` | `true` | ูุนุงูโุณุงุฒ ฺฉุด ุจุฑุง ูุชุงุฌ `asyncSearchFn`. |
| **`fallbackToAllWhenQueryShort`** | `boolean` | `false` | ุงฺฏุฑ ฺฉูุฆุฑ ุงุฒ `minSearchLength` ฺฉูุชุงูโุชุฑ ุจูุฏุ ฺฉู `staticData` ุจุฑฺฏุฑุฏุงูุฏู ุดูุฏ. |

-----

## ๐ค ุฑูุฏุงุฏูุง (Outputs)

| ูุงู | ููุน | ุชูุถุญ |
| :--- | :--- | :--- |
| `rawInput` | `EventEmitter<string>` | ุงูุชุดุงุฑ ููฺฏุงู ุชุบุฑ ููุฏุงุฑ ุฎุงู ูุฑูุฏ ุชูุณุท ฺฉุงุฑุจุฑ. |
| `searchResult` | `EventEmitter<T[]>` | ุงูุชุดุงุฑ ูพุณ ุงุฒ ุงุชูุงู ุฌุณุชุฌู ู ุงุฑุงุฆู ูุชุงุฌ ููุง (ูุฎุตูุตุงู ุฏุฑ ุญุงูุชโูุง ุฌุณุชุฌู ุฏุงุฎู). |

-----

## ๐ง ููุทู ู ูุชุฏูุง

| ูุชุฏ | ุชูุถุญ |
| :--- | :--- |
| **`ngOnInit()`** | ุซุจุช `Subscription` ุจุฑุง `control.valueChanges` ฺฉู ุจุง `debounceTime` ู `distinctUntilChanged` ุจูููโุณุงุฒ ุดุฏู ู ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู `autoTriggerSearch`ุ ูุชุฏ `triggerSearch` ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ. |
| **`ngOnDestroy()`** | ูุบู ุงุดุชุฑุงฺฉ `controlSubscription` ุจุฑุง ุฌููฺฏุฑ ุงุฒ Memory Leak. |
| **`performSearch(query: string)`** | ูุชุฏ ูุณุชู ฺฉู ููุทู ุฌุณุชุฌู (ููฺฉุงูุ ูุงููฺฏุงู ุจุง ฺฉุดุ ุง `onSearchQuery`) ุฑุง ูุฏุฑุช ฺฉุฑุฏู ู ูุชุงุฌ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ. |
| **`triggerSearch(query: string)`** | ุงุฌุฑุง `performSearch` ู ุงูุชุดุงุฑ ููุง ูุชุงุฌ ุงุฒ ุทุฑู `searchResult`. |
| **`refreshSearch()`** | ูุชุฏ ุจุฑุง ุงุฌุฑุง ุงุฌุจุงุฑ ุฌุณุชุฌู ุจุง ูุงุฏุฏูโฺฏุฑูุชู ฺฉุด (Force Refresh). |
| **`onSearchButtonClick()`** | ูุฑุงุฎูุงู `triggerSearch` ุจูโุตูุฑุช ุฏุณุช ุฏุฑ ุตูุฑุช ฺฉูฺฉ ฺฉุงุฑุจุฑ ุฑู ุฏฺฉูู ุฌุณุชุฌู ู ุบุฑูุนุงู ุจูุฏู `autoTriggerSearch`. |

-----

## ๐ ููููู ุงุณุชูุงุฏู (HTML)

ุงู ฺฉุงููพูููุช ุดุงูู ฺฉ `TextInputComponent` ุฏุงุฎู ู ฺฉ `ButtonComponent` ุงุณุช.

```html
<app-search-input
  [control]="form.get('productName')!"
  placeholder="ุฌุณุชุฌู ูุญุตูู..."
  icon="pi pi-box"
  searchButtonLabel="ุฌุณุชุฌู ฺฉู"
  [autoTriggerSearch]="true"
  [debounceTimeMs]="500"
  [minSearchLength]="2"
  [asyncSearchFn]="searchProductApi" 
  [itemMatchesQuery]="matchProductItem"
  (searchResult)="handleResults($event)"
></app-search-input>
```

```typescript
// ุฏุฑ ฺฉุงููพูููุช ูุงูุฏ
// ูุฑุถ ฺฉูุฏ T ุงุฒ ููุน Product ุงุณุช: { name: string, price: number }

// 1. ุชุงุจุน ุฌุณุชุฌู ูุงููฺฏุงู
searchProductApi = async (query: string): Promise<Product[]> => {
  // ุดุจู ุณุงุฒ ูุฑุงุฎูุงู ุณุฑูุณ
  return this.productService.search(query); 
};

// 2. ุชุงุจุน ููุชุฑูฺฏ (ุจุฑุง ููุชุฑ ฺฉุฑุฏู ูุชุงุฌ ฺฉุด ุดุฏู ุง ููฺฉุงู)
matchProductItem = (item: Product, query: string): boolean => {
  return item.name.toLowerCase().includes(query.toLowerCase());
};

// 3. ูุฏุฑุช ูุชุงุฌ
handleResults(products: Product[]): void {
  console.log('ูุชุงุฌ ุฌุณุชุฌู ููุง:', products);
  //... ููุทู ููุงุด ูุชุงุฌ
}
```